<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>ICT Digital Delivery</title>
        <meta name="description" content="ICT Digital Delivery - Quiz">
        <link rel="icon" href="ico/favicon.ico">
        <link rel="apple-touch-icon" href="ico/apple-touch-icon.png">
        <link rel="stylesheet" href="css/styles.css?v=1.0">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script type="text/javascript" src="https://davidlynch.org/projects/maphilight/jquery.maphilight.min.js"></script>
        <script type="text/javascript">

        var sections = {LeftWing:0, RightWing:0, Tail:0, Centre:0, Turret:0, Cockpit:0, LeftEngine:0, RightEngine:0};
        var selectionCounter = 0;

            $(function(){
                $('.map').maphilight({
                    fillColor: 'fcb045',
                    fillOpacity:0.4,
                    stroke:false,
                    neverOn:true
                });

                $('.section').click(function(e) {
                    e.preventDefault();
                    
                    if (sections[this.title] === 0) {
                        if (selectionCounter < 4 ) {
                            var data = $(this).mouseout().data('maphilight') || {};
                            data.alwaysOn = !data.alwaysOn;
                            $(this).data('maphilight', data).trigger('alwaysOn.maphilight');
                            sections[this.title] = 1;
                            selectionCounter++;
                        }
                        else {
                            alert("You can add armour to a maximum of four sections.");
                        }
                    }
                    else {
                        var data = $(this).mouseout().data('maphilight') || {};
                        data.alwaysOn = !data.alwaysOn;
                        $(this).data('maphilight', data).trigger('alwaysOn.maphilight');
                        sections[this.title] = 0;
                        selectionCounter--;
                    }
                    console.log(selectionCounter);
                    //sections[this.title] === 0 ? sections[this.title] = 1 : sections[this.title] = 0;
                    // Update form field
                    document.getElementById(this.title).value = sections[this.title];
                });

                })

            function displayResults() {
                
                document.getElementById("results").innerText = JSON.stringify(sections, null, 4);
            }
            
        </script>
    </head>
    <body class="plane">
        <div class="container">
            <h1>Exercise</h1>
            <div class="imginfo">
                <span>Select the areas of the plane you would add armour to. You can't armour too much of the plane as it will restrict the amount of payload the plane can carry.</span>
            </div>
            <!-- Image Map Generated by http://www.image-map.net/ -->
            <img src="img/diagram.png" usemap="#image-map" class="map">
            <map name="image-map">
                <area
                    class="section"
                    alt="LeftWing"
                    title="LeftWing"
                    href="javascript:void(0);"
                    coords="18,155,148,133,163,205,46,188,14,171"
                    shape="poly"
                >
                <area
                    class="section"
                    alt="RightWing"
                    title="RightWing"
                    href="javascript:void(0);"
                    coords="424,131,413,204,536,185,567,164,553,150"
                    shape="poly"
                >
                <area
                    class="section"
                    alt="Tail"
                    title="Tail"
                    href="javascript:void(0);"
                    coords="200,430,383,428,396,422,397,405,387,391,306,377,279,378,201,393,184,403,186,420"
                    shape="poly"
                >
                <area
                    class="section"
                    alt="Centre"
                    title="Centre"
                    href="javascript:void(0);"
                    coords="209,146,158,155,166,203,263,222,266,251,314,250,314,220,411,203,416,162,374,138,351,177,333,143,245,145,227,180"
                    shape="poly"
                >
                <area
                    class="section"
                    alt="Turret"
                    title="Turret"
                    href="javascript:void(0);"
                    coords="267,253,314,253,304,372,277,373"
                    shape="poly"
                >
                <area
                    class="section"
                    alt="Cockpit"
                    title="Cockpit"
                    href="javascript:void(0);"
                    coords="281,17,265,115,268,139,311,139,311,108,293,16"
                    shape="poly"
                >
                <area
                    class="section"
                    alt="LeftEngine"
                    title="LeftEngine"
                    href="javascript:void(0);"
                    coords="178,48,177,69,202,71,201,122,225,171,254,120,245,68,270,65,265,48,226,39"
                    shape="poly"
                >
                <area
                    class="section"
                    alt="RightEngine"
                    title="RightEngine"
                    href="javascript:void(0);"
                    coords="306,64,310,51,351,41,394,55,396,67,371,69,375,127,350,170,328,120,328,70"
                    shape="poly"
                >
            </map>

            <form method="POST" action="https://script.google.com/macros/s/AKfycbxz25BpL8EjWafj8BJC_6zFFrExXnjrVBBi51ej7Dtmfi5jK5WCxIQvcfqQlSxIKPQrHQ/exec">
                <input name="LeftWing" id="LeftWing" type="text" value="0" hidden>
                <input name="RightWing" id="RightWing" type="text" value="0" hidden>
                <input name="Tail" id="Tail" type="text" value="0" hidden>
                <input name="Centre" id="Centre" type="text" value="0" hidden>
                <input name="Turret" id="Turret" type="text" value="0" hidden>
                <input name="Cockpit" id="Cockpit" type="text" value="0" hidden>
                <input name="LeftEngine" id="LeftEngine" type="text" value="0" hidden>
                <input name="RightEngine" id="RightEngine" type="text" value="0" hidden>
                <button class="btn right" type="submit">Submit</button>
            </form>
            <div class="" buttonbar>
                <!--<button class="btn" style="margin-left:auto;" onclick="displayResults()">Display Sections Selected</button>-->
            </div>
            <div class="results" id="results"></div>
        </div>
        <!--<script src="js/main.js"></script>-->
    </body>
</html>
